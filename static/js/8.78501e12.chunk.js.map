{"version":3,"sources":["components/Uploader.js","components/Tips.js","pages/Home.js"],"names":["Dragger","Upload","Result","styled","div","_templateObject","_taggedTemplateLiteral","H1","h1","_templateObject2","Image","img","_templateObject3","Component","observer","_useStores","useStores","ImageStore","UserStore","ref1","useRef","ref2","store","useLocalStore","width","setWidth","concat","height","setHeight","serverFile","attributes","url","widthStr","heightStr","props","showUploadList","beforeUpload","file","setFile","setFilename","name","currentUser","message","warning","upload","then","console","log","catch","React","createElement","className","InboxOutlined","target","href","filename","src","ref","onChange","current","value","placeholder","fullStr","Tips","_ref","children","Fragment","Home","Uploader"],"mappings":"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","file":"static/js/8.78501e12.chunk.js","sourcesContent":["import React, { useRef } from 'react';\nimport { useStores } from '../stores';\nimport { observer, useLocalStore } from 'mobx-react';\nimport { Upload, message } from 'antd';\nimport { InboxOutlined } from '@ant-design/icons';\nimport styled from 'styled-components';\n\nconst { Dragger } = Upload;\n\n\nconst Result = styled.div`\n  margin-top: 30px;\n  border: 1px dashed #ccc;\n  padding: 20px;\n`;\nconst H1 = styled.h1`\n  margin: 20px 0;\n  text-align: center;\n`;\nconst Image = styled.img`\n  max-width: 300px;\n`;\n\n\n\nconst Component = observer(() => {\n  const { ImageStore, UserStore } = useStores();\n  const ref1 = useRef();\n  const ref2 = useRef();\n\n  const store = useLocalStore(() => ({\n    width: null,\n    setWidth(width) {\n      store.width = width;\n    },\n    get widthStr() {\n      return store.width?`/w/${store.width}`:'';\n    },\n    height: null,\n    setHeight(height) {\n      store.height = height;\n    },\n    get heightStr() {\n      return store.height?`/h/${store.height}`:'';\n    },\n    get fullStr() {\n      //?imageView2/0/w/800/h/400)\n      return ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr\n    }\n\n  }));\n\n  const bindWidthChange = () => {\n    console.log('bindWidthChange...')\n    console.log(ref1.current.value)\n    store.setWidth(ref1.current.value);\n  };\n\n  const bindHeightChange = () => {\n    store.setHeight(ref2.current.value);\n  };\n\n  const props = {\n    showUploadList: false,\n    beforeUpload: file => {\n      ImageStore.setFile(file);\n      ImageStore.setFilename(file.name);\n      if(UserStore.currentUser === null) {\n        message.warning('请先登录再上传！');\n        return false;\n      }\n      ImageStore.upload()\n        .then((serverFile) => {\n          console.log('上传成功')\n          console.log(serverFile);\n        }).catch(() => {\n          console.log('上传失败')\n        });\n      return false;\n    }\n  };\n\n  return (\n    <div>\n      <Dragger {...props}>\n        <p className=\"ant-upload-drag-icon\">\n          <InboxOutlined />\n        </p>\n        <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\n        <p className=\"ant-upload-hint\">\n          Support for a single or bulk upload. Strictly prohibit from uploading company data or other\n          band files\n    </p>\n      </Dragger>\n\n      {\n        ImageStore.serverFile ? <Result>\n          <H1>上传结果</H1>\n          <dl>\n            <dt>线上地址</dt>\n            <dd><a target=\"_blank\" href={ImageStore.serverFile.attributes.url.attributes.url}>{ ImageStore.serverFile.attributes.url.attributes.url}</a></dd>\n            <dt>文件名</dt>\n            <dd>{ImageStore.filename}</dd>\n            <dt>图片预览</dt>\n            <dd>\n              <Image src={ImageStore.serverFile.attributes.url.attributes.url}/>\n            </dd>\n            <dt>更多尺寸</dt>\n            <dd>\n              <input ref={ref1} onChange={bindWidthChange} placeholder=\"最大宽度（可选）\"/>\n              <input ref={ref2} onChange={bindHeightChange} placeholder=\"最大高度（可选）\"/>\n            </dd>\n            <dd>\n              <a  target=\"_blank\" href={store.fullStr}>{store.fullStr}</a>\n            </dd>\n          </dl>\n        </Result> : null\n      }\n    </div>\n  );\n});\nexport default Component;","import React from 'react';\nimport { useStores } from '../stores';\nimport { observer } from 'mobx-react';\nimport styled from 'styled-components';\n\nconst Tips = styled.div`\n  background: orange;\n  padding: 10px;\n  margin: 30px 0;\n  color: #fff;\n  border-radius: 4px;\n`;\n\nconst Component = observer(({ children }) => {\n  const { UserStore } = useStores();\n  return (\n    <>\n      {\n        UserStore.currentUser ? null : <Tips>{children}</Tips>\n      }\n    </>\n  );\n});\n\nexport default Component;","import React from 'react';\nimport { observer } from 'mobx-react';\nimport { useStores } from '../stores';\nimport Uploader from '../components/Uploader';\nimport Tips from '../components/Tips';\n\nconst Home = observer(() => {\n  const { UserStore } = useStores();\n\n  const User = () => <div>Hello {UserStore.currentUser.attribures.username} </div>\n\n  return (\n    <>\n        <Tips>请先登录再上传!!!</Tips>\n      \n      <Uploader />\n    </>\n  );\n});\n\nexport default Home;"],"sourceRoot":""}