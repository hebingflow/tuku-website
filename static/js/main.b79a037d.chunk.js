(this["webpackJsonpreact-epic-teach"]=this["webpackJsonpreact-epic-teach"]||[]).push([[2],{18:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(21),o=n.n(r);o.a.init({appId:"UqBaAsQMqOQB3rLwNGLTKtOF-gzGzoHsz",appKey:"uv9EyQmkgX7UjUt4TeVUBhVa",serverURL:"https://uqbaasqm.lc-cn-n1-shared.com"});var a={register:function(e,t){var n=new r.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},login:function(e,t){return console.log("------"),console.log(e,t),new Promise((function(n,o){r.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return o(e)}))}))},logout:function(){r.User.logOut()},getCurrentUser:function(){return r.User.current()}},i={add:function(e,t){var n=new o.a.Object("Image"),r=new o.a.File(t,e);return n.set("filename",t),n.set("owner",o.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))}}},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var r,o,a,i,c,l,u,s,p,f=n(0),m=n(19),b=n(35),g=n(36),y=n(10),O=(n(51),n(1)),h=n(18),j=new(r=function(){function e(){Object(b.a)(this,e),Object(m.a)(this,"currentUser",o,this)}return Object(g.a)(e,[{key:"pullUser",value:function(){this.currentUser=h.a.getCurrentUser()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),o=Object(y.a)(r.prototype,"currentUser",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(y.a)(r.prototype,"pullUser",[O.f],Object.getOwnPropertyDescriptor(r.prototype,"pullUser"),r.prototype),Object(y.a)(r.prototype,"resetUser",[O.f],Object.getOwnPropertyDescriptor(r.prototype,"resetUser"),r.prototype),r),v=new(a=function(){function e(){Object(b.a)(this,e),Object(m.a)(this,"values",i,this)}return Object(g.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){h.a.login(e.values.username,e.values.password).then((function(e){j.pullUser(),t(e)})).catch((function(e){j.resetUser(),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){h.a.register(e.values.username,e.values.password).then((function(e){j.pullUser(),t(e)})).catch((function(e){j.resetUser(),n(e)}))}))}},{key:"logout",value:function(){h.a.logout(),j.resetUser()}}]),e}(),i=Object(y.a)(a.prototype,"values",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(y.a)(a.prototype,"setUsername",[O.f],Object.getOwnPropertyDescriptor(a.prototype,"setUsername"),a.prototype),Object(y.a)(a.prototype,"setPassword",[O.f],Object.getOwnPropertyDescriptor(a.prototype,"setPassword"),a.prototype),Object(y.a)(a.prototype,"login",[O.f],Object.getOwnPropertyDescriptor(a.prototype,"login"),a.prototype),Object(y.a)(a.prototype,"register",[O.f],Object.getOwnPropertyDescriptor(a.prototype,"register"),a.prototype),Object(y.a)(a.prototype,"logout",[O.f],Object.getOwnPropertyDescriptor(a.prototype,"logout"),a.prototype),a),d=new(c=function(){function e(){Object(b.a)(this,e),Object(m.a)(this,"filename",l,this),Object(m.a)(this,"file",u,this),Object(m.a)(this,"isUpoading",s,this),Object(m.a)(this,"serverFile",p,this)}return Object(g.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUpoading=!0,new Promise((function(t,n){h.b.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){console.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUpoading=!1}))}))}}]),e}(),l=Object(y.a)(c.prototype,"filename",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=Object(y.a)(c.prototype,"file",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=Object(y.a)(c.prototype,"isUpoading",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=Object(y.a)(c.prototype,"serverFile",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(y.a)(c.prototype,"setFilename",[O.f],Object.getOwnPropertyDescriptor(c.prototype,"setFilename"),c.prototype),Object(y.a)(c.prototype,"setFile",[O.f],Object.getOwnPropertyDescriptor(c.prototype,"setFile"),c.prototype),Object(y.a)(c.prototype,"upload",[O.f],Object.getOwnPropertyDescriptor(c.prototype,"upload"),c.prototype),c),w=Object(f.createContext)({AuthStore:v,UserStore:j,ImageStore:d});window.stores={AuthStore:v,UserStore:j,ImageStore:d};var U=function(){return Object(f.useContext)(w)}},75:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},81:function(e,t,n){e.exports=n(92)},86:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var r,o,a,i,c,l,u=n(0),s=n.n(u),p=n(32),f=n.n(p),m=(n(86),n(22)),b=n(75),g=n.n(b),y=n(38),O=n(6),h=n(23),j=n(94),v=n(62),d=n(64),w=h.a.header(r||(r=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  padding: 10px 100px;\n  background-color: #02101f;\n  color: #fff;\n"]))),U=h.a.img(o||(o=Object(m.a)(["\n  height: 30px;\n"]))),E=Object(h.a)(y.b)(a||(a=Object(m.a)(["\n  color: #fff;\n  margin-left: 30px;\n\n  &.active {\n    border-bottom: 1px solid #fff;\n  }\n"]))),P=h.a.div(i||(i=Object(m.a)(["\n  margin-left: auto;\n"]))),k=Object(h.a)(j.a)(c||(c=Object(m.a)(["\n  margin-left: 10px;\n"]))),x=Object(d.a)((function(){var e=Object(O.f)(),t=Object(v.a)(),n=t.UserStore,r=t.AuthStore;return Object(u.useEffect)((function(){n.pullUser()}),[]),s.a.createElement(w,null,s.a.createElement(U,{src:g.a}),s.a.createElement("nav",null,s.a.createElement(E,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),s.a.createElement(E,{to:"/history",activeClassName:"active"},"\u4e0a\u4f20\u5386\u53f2"),s.a.createElement(E,{to:"/about",activeClassName:"active"},"\u5173\u4e8e\u6211")),s.a.createElement(P,null,n.currentUser?s.a.createElement(s.a.Fragment,null,n.currentUser.attributes.username," ",s.a.createElement(k,{type:"primary",onClick:function(){r.logout()}},"\u6ce8\u9500")):s.a.createElement(s.a.Fragment,null,s.a.createElement(k,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),e.push("/login")}},"\u767b\u5f55"),s.a.createElement(k,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),e.push("/register")}},"\u6ce8\u518c"))))})),z=h.a.footer(l||(l=Object(m.a)(["\n  padding: 10px 100px;\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n"])));var F=function(){return s.a.createElement(z,null,s.a.createElement("p",null,"Footer"))};function C(){return s.a.createElement("div",null,"Loading...")}console.log(C);var D=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,140))})),S=Object(u.lazy)((function(){return n.e(7).then(n.bind(null,133))})),I=Object(u.lazy)((function(){return n.e(6).then(n.bind(null,134))})),B=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.bind(null,135))})),q=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,136))}));var A=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(x,null),s.a.createElement("main",null,s.a.createElement(u.Suspense,{fallback:s.a.createElement(C,null)},s.a.createElement(O.c,null,s.a.createElement(O.a,{path:"/",exact:!0,component:D}),s.a.createElement(O.a,{path:"/history",component:S}),s.a.createElement(O.a,{path:"/about",component:I}),s.a.createElement(O.a,{path:"/login",component:B}),s.a.createElement(O.a,{path:"/register",component:q})))),s.a.createElement(F,null))};n(91),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(18);f.a.render(s.a.createElement(y.a,null,s.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[81,3,4]]]);
//# sourceMappingURL=main.b79a037d.chunk.js.map